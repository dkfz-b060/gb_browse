<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--meta http-equiv="X-Frame-Options" content="allow"-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <script src="./js/jquery-1.12.4.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./css/browser/style.css" />
    <script type="text/javascript" src="./js/browser/jscolor.min.js"></script>
    <script type="text/javascript" src="./js/browser/base.js"></script>
    <script type="text/javascript" src="./js/browser/session.js"></script>
    <script type="text/javascript" src="./js/browser/bev.js"></script>
    <script type="text/javascript" src="./js/browser/gsm.js"></script>
    <script type="text/javascript" src="./js/browser/session.js"></script>
    <script type="text/javascript" src="./js/browser/fileload.js"></script>
    <script type="text/javascript" src="./js/browser/scp.js"></script>
    <script type="text/javascript" src="./js/browser/geneplot.js"></script>
    <script type="text/javascript" src="./js/browser/validhub.js"></script>
    <script type="text/javascript" src="./js/browser/circlet.js"></script>
    <script type="text/javascript" src="./js/browser/sukn.js"></script>
    <script type="text/javascript" src="./js/browser/personality.js"></script>
    <script type="text/javascript" src="./js/browser/dataProvider.js"></script>
    <script type="text/javascript" src="./js/browser/hicInterface.js"></script>
    <script type="text/javascript" src="./js/browser/embed.js"></script>

    <link href="./css/bootstrap-3.3.2.min.css" rel="stylesheet">
    <link href="./css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="./css/bootstrap-multiselect.css" rel="stylesheet">
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link href="theme.css" rel="stylesheet">

    <!--script src="../../assets/js/ie-emulation-modes-warning.js"></script-->
    <script src="./js/bootstrap-3.3.2.min.js"></script>
    <script src="./js/bootstrap-multiselect.js"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="./session.js"></script>
    <script src="./data.js"></script>
    <script src="./func.js"></script>

    <title>Glioblastoma Epigenomics</title>
  </head>


  <body role="document">
    <div id="header"></div>
    <div class="container-fluid theme-showcase" role="main" id="body">
      <div class="page-header" style="width: 60%; margin: 0 auto">
          <a name="ChipSeq_DNaseSeq"></a>
          <h1>Glioblastoma</h1>
            <h2>Genome Browser</h2>
				<h3>Overview</h3>
				<p>The large number of genome tracks derived from the samples, datas and analyses generated for this publication can be visualised in the WashU Epigenome Browser. Our data and code is publicly available at the GEO (<a href="https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE121723">GSE121723</a>) and on <a href="https://github.com/dkfz-b060/">Github</a>.</p>
				
				<p>This webpage will generate a JSON session file, based on your selected options below, that will then be sent to the <a href="http://epigenomegateway.wustl.edu/">WashU Epigenome Browser</a> for viewing.</p>
				
				<h3>GB tumour data launcher</h3>
				
				<p>An explainer for each option:
					<ul>
						<li><b>Sample ID</b>: select individual tumours and normal samples, subtype consensus, and pan-GB calls.</li>
						<li><b>Assay</b>: data types: RNAseq, WGBS, histone ChIPseq, Superenhancer and Methylation Feature (DMV, LMR, PMD) analyses.</li>
						<li><b>Dataset</b>: analysis types: Raw signals, narrow/broad peak calls (MACS2), ChromHMM states, Methylation features, Superenhancers.</li>
						<li><b>Session</b>: pre-defined sessions (see below for details).</li>
					</ul>
					<br>
					Note that not all combinations of options will work - e.g. selecting <b>Assays (Superenhancers, H3K27ac, etc.)</b> for a sample which does not have them
					<br>	
					These can be individually (de-)selected at the user's discretion. Use the "Deselect all" button to wipe all picked options, and if you want to select everything, pick the "All data" session.
				</p>
				
				<br>
				
				<p><b>Pre-defined sessions</b> are our suggestions for useful starting points to investigate our dataset.
					<ul>
						<li><b>All data</b>: EVERY track in the dataset. (Warning: >500 tracks!)</li>
						<li><b>IDH (all data)</b>: All tracks for the IDH subtype.</li>
						<li><b>MES (all data)</b>: All tracks for the MES subtype.</li>
						<li><b>RTK_I (all data)</b>: All tracks for the RTK_I subtype.</li>
						<li><b>RTK_II (all data)</b>: All tracks for the RTK_II subtype.</li>
						<li><b>Methylation data and analysis</b>: WGBS calls for all samples, with methylation feature (DMV, LMR, PMD) calls.</li>
						<li><b>Superenhancer analysis</b>: H3K27ac samples with MACS2 narrow peak calls, and SE calls from ROSE2.</li>
						<li><b>Chromatin state annotation (ChromHMM)</b>: Sample and subtype consensus ChromHMM models, with all RNAseq samples.</li>
					</ul>
				</p>
				
				<p>
					<b>Important User's Note</b>: once the session has been successfully launched in the WashU browser, you can easily modify the session's tracks and/or options and then save/share the session using their built-in app!
				</p>
				
				<br><br>
				
	    <div class="row">
               <div class="col-sm-5">
               <section>Sample ID: <select id="eid" multiple="multiple"></select></section>
               <section>Assay: <select id="assay" multiple="multiple"></select></section>
               <section>Dataset: <select id="dataset" multiple="multiple">
		<option>Raw signals</option>
		<option>Narrow peak</option>
		<option>Broad peak</option>
		<option>Chromatin states</option>
		<option>Methylation features</option>
		<option>Superenhancers</option>				
		</select></section></div>
		<div class="col-sm-7">
		<p>you can select some pre-defined session here, or cell line<br>Note: they are independent!!</p>
		<section>Cell line: <select id="celline">
			<option>foo</option>
			<option>bar</option>
		</select></section>
		<section>Session: <select id="session" onchange="on_change_session(this)"></select></section></div>
	    </div>
	    
		<div class="row">		
		<button id="deselectAll" class="btn btn-default">Deselect all options</button>
		<button id="selectAllSamp" class="btn btn-default">Select all samples</button>
		<button id="deselectAllSamp" class="btn btn-default">Deselect all samples</button>
		</div>
		
	    <div class="row">
                  <br><input type="checkbox" id="chkbox_new_page"> Open in a new page (deactivate pop-up blockers)</input>
                <br><button onclick="on_submit(this)" class="btn btn-default">Launch browser session!</button>
		</div>		
		
		<div id="panel1" style="margin:20px;border:solid 2px green;display:none;" ></div>
	    </div>
              <script>
                init_rep_hist();
		init_sessions("session",sessions);
		$('#eid').multiselect({includeSelectAllOption: true});
		$('#assay').multiselect({includeSelectAllOption: true});
		$('#dataset').multiselect({includeSelectAllOption: true});
		$('#session').multiselect({includeSelectAllOption: false});
		$('#celline').multiselect({includeSelectAllOption: false});
		$('#deselectAll').on('click', function() {
		    $('#eid').multiselect("clearSelection").multiselect('refresh');
		    $('#assay').multiselect("clearSelection").multiselect('refresh');
		    $('#dataset').multiselect("clearSelection").multiselect('refresh');
		    //$('#session').multiselect("clearSelection").multiselect('refresh');
		});
		// this button doesn't work yet!
		$('#selectAllSamp').on('click', function() {
		    $('#eid').multiselect("selectAll", true).multiselect('refresh');
		});
		$('#deselectAllSamp').on('click', function() {
		    $('#eid').multiselect("clearSelection").multiselect('refresh');
		});
              </script>
          </div>
	<br>
	<br>
    </div> <!-- /container -->

    <div id="footer">
	<footer>
	 <div class="container-fluid" style="width: 60%; margin: 0 auto">
	   <p>&copy;Copyright 2019 Division of Molecular Genetics, dkfz. Tested with Safari 11, Firefox 66, Chrome 70 at 1280x800, 1440x900, 3440x1440 resolutions</p>
	 </div> 
	</footer>
    </div>
  </body>
</html>




